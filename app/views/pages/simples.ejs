<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meus Dados</title>
  <link rel="stylesheet" href="/css/simples.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="/js/verificacao/simples.js" defer></script>
</head>
<body>
  <section id="container">
    <nav class="pagehead">
      <a href="javascript:window.history.back()" class="back" aria-label="Voltar">
        <svg viewBox="0 0 24 24" class="icon" aria-hidden="true">
          <path d="M15.5 4.5 7 12l8.5 7.5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>
      <h1 id="h1">Meus Dados</h1>
    </nav>
<br><br><br>
    <main>
      <form method="post" action="/simples" class="form-dados" role="form" aria-label="FormulÃ¡rio de Dados">
        <% 
          const errs = (typeof errors !== 'undefined' && errors) ? errors : [];
          const oldVals = (typeof old !== 'undefined' && old) ? old : {};
          const currentUser = (typeof user !== 'undefined' && user) ? user : {};
          const nomeErr = errs.find(e => e.param === 'nome');
          const emailErr = errs.find(e => e.param === 'data');
        %>

        <% if (typeof success !== 'undefined' && success) { %>
          <p class="success" role="status" aria-live="polite"><%= success %></p>
        <% } %>

        <fieldset class="input-group">
          <section class="form-group">
            <label for="nome">Nome:</label>
            <input type="text" id="nome" name="nome" aria-describedby="nome-error" required
                   value="<%= oldVals.nome ?? currentUser.nome ?? '' %>">
            <span class="error-message" id="nome-error" role="alert" aria-live="polite"><%= nomeErr ? nomeErr.msg : '' %></span>
          </section>

          <section class="form-group">
            <label for="data">E-mail:</label>
            <input type="email" id="data" name="data" aria-describedby="data-error" required
                   value="<%= oldVals.data ?? currentUser.email ?? '' %>">
            <span class="error-message" id="data-error" role="alert" aria-live="polite"><%= emailErr ? emailErr.msg : '' %></span>
          </section>
        </fieldset>

        <section>
          <button type="submit" class="salvar">Salvar</button>
          <button type="button" class="editar">Editar</button>
        </section>
      </form>
    </main>
  </section>
</body>
</html>
